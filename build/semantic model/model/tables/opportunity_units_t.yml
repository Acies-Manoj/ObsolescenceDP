tables:
  - name: opportunity_unit
    sql: {{ load_sql('opportunity_unit') }}
    description: >
      Defines opportunity-level sales and modernization intent data.
      Captures opportunity lifecycle status, priority, campaign alignment,
      and unit linkage to support obsolescence-driven campaign targeting.
    public: true

    dimensions:
      - name: opportunity_id
        type: string
        column: OPPORTUNITY_ID
        primary_key: true
        public: true
        description: "Unique identifier for the opportunity."

      - name: priority
        type: string
        column: PRIORITY
        description: "Priority level assigned to the opportunity."

      - name: opportunity_name
        type: string
        column: OPPORTUNITY_NAME
        description: "Name of the opportunity, often indicating modernization or enhancement type."

      - name: opportunity_status
        type: string
        column: OPPORTUNITY_STATUS
        description: "Current status of the opportunity."

      - name: gsscore_iscancellationalert
        type: boolean
        column: GSSCORE_ISCANCELLATIONALERT
        description: "Indicates if the opportunity has a cancellation alert."

      - name: gsscore_proposaldelivered
        type: boolean
        column: GSSCORE_PROPOSALDELIVERED
        description: "Indicates whether the proposal has been delivered."

      - name: actual_close_date
        type: string
        column: ACTUALCLOSEDATE
        description: "Actual close date of the opportunity."

      - name: quote_id
        type: string
        column: QUOTE_ID
        description: "Quote identifier associated with the opportunity."

      - name: gsscore_torderprimaryproduct
        type: string
        column: GSSCORE_TORDERPRIMARYPRODUCT
        description: "Primary product linked to the opportunity."

      - name: gsscore_businessstream
        type: string
        column: GSSCORE_BUSINESSSTREAM
        description: "Business stream classification."

      - name: gsscore_utm_campaign
        type: string
        column: GSSCORE_UTMCAMPAIGN
        description: "UTM campaign reference."

      - name: gsscore_unitid
        type: number
        column: GSSCORE_UNITID
        description: "Unit identifier reference."

      - name: unit_erp_number
        type: string
        column: UNIT_ERP_NUMBER
        description: "ERP unit number linked to the opportunity."

      - name: contract_erp_number
        type: string
        column: CONTRACT_ERP_NUMBER
        description: "ERP contract number linked to the opportunity."

    measures:
      - name: total_opportunities
        sql: "COUNT(DISTINCT {opportunity_id})"
        type: number
        description: "Total number of unique opportunities."

    